# Repository Guidelines

## Project Structure & Module Organization
- `src/components/`: Stencil components, each in `src/components/<name>/usps-<name>.tsx` with matching `usps-<name>.css` and a `readme.md`.
- `src/stories/`: Storybook stories, one per component (for example, `src/stories/usps-button.stories.ts`).
- `src/tokens/`, `src/themes/`, `src/global/`: design tokens, theme overrides, and shared CSS.
- Build outputs land in `dist/` and `loader/`; Storybook static output is `storybook-static/`.

## Build, Test, and Development Commands
- `npm start`: local dev server with watch mode and hot rebuilds.
- `npm run build`: production Stencil build into `dist/`.
- `npm run storybook`: Storybook dev server at `http://localhost:6006`.
- `npm run build-storybook`: static Storybook build in `storybook-static/`.
- `npm run lint`: ESLint for `src/**/*.ts` and `src/**/*.tsx`.
- `npm run format`: Prettier formatting for `src/**/*.{ts,tsx,css}`.

## Coding Style & Naming Conventions
- TypeScript is strict (`tsconfig.json`); keep types explicit and avoid unused locals/params.
- Prettier: 2-space indentation, single quotes, semicolons, trailing commas, print width 100.
- Naming: component tags and files use the `usps-` prefix (for example, `usps-card.tsx`).
- Co-locate CSS with the component and keep Storybook stories named `usps-<name>.stories.ts`.

## Testing Guidelines
- No automated unit tests are configured yet.
- Use Storybook for manual and accessibility checks; update/add stories with component changes.
- Run `npm run lint` before submitting changes.

## Commit & Pull Request Guidelines
- Commit messages are short, imperative, sentence-case (for example, “Fix WCAG 2.1 AA violations…”).
- Keep commits focused on a single change or feature.
- PRs should include: a concise description, linked issue (if any), and Storybook screenshots or a short screen capture for UI changes.

## New Component Requirements
When adding a new component, ensure every item is satisfied before merging:

### Implementation
- Component lives in `src/components/<name>/` with a `.tsx` and `.css` file.
- Props, events, and slots are documented in the component `readme.md` (verify autogenerated output after build).
- All spacing and color values reference tokens from `src/tokens/tokens.css`.
- Variants and states (sizes, hover/active/disabled, typography, spacing) match the USPS style guide.
- Keyboard interactions and `:focus-visible` focus states are implemented for all interactive elements.

### Stories
- A story exists at `src/stories/usps-<name>.stories.ts`.
- Stories cover the default state plus key variants and states (hover, active, disabled where relevant).
- Stories use realistic content (labels, icons, links).

### Tests
- Unit tests are added or updated for core behavior and events.
- Accessibility checks are added or validated in Storybook (via `@storybook/addon-a11y`).

### Bindings & Exports
- The component is exported via Stencil build (types in `src/components.d.ts` update after build).
- Framework bindings (React/Vue/Angular wrappers or docs) are updated if applicable.

### Accessibility
- Semantic HTML is correct (for example, `<button>` vs `<a>`, proper heading levels, lists).
- ARIA attributes are used only when needed and are accurate (`aria-label`, `aria-describedby`, `aria-invalid`, roles).
- Color contrast meets WCAG 2.1 AA for all text and interactive states.
- Error messages are linked to their controls via `aria-describedby`.
- Required fields include a visually-hidden `(required)` label for screen readers.
- Tooltips and popover content are dismissable with the Escape key (WCAG 1.4.13).

### Style Guide Alignment
- Visuals match the USPS style guide (colors, icons, spacing, typography).
- States match the guide (hover/active/selected/error).
- Any deviations from the guide are documented and approved.

## Configuration Tips
- Design tokens live in `src/tokens/tokens.css` and are consumed via CSS custom properties.
- Themes are applied via `<usps-theme theme="dark">` or `data-theme` on a wrapper element.
